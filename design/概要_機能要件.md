# システムの概要

本システムは、個人が所有する服を **ラベルと画像** で管理し、服の組み合わせを **テンプレート** として登録・再利用できる Web アプリケーションである。
日々の服装を「テンプレート」または「テンプレートに含まれない服の組み合わせ」として記録し、**直近 1 週間の履歴**を中心に振り返ることで、服選びの手間や偏りを減らすことを目的とする。

本システムはアカウントを持たず、**ワードローブ ID（十分に長いランダムな ID）を含む URL** によってデータを分離する。
ユーザーはサイトトップからワードローブを新規作成し、生成された URL を自身で管理することで、クラウド同期された同一データに複数端末からアクセスできる。

---

# 目的

* 毎朝の服選びにかかる **思考コストを下げる**
* 同じ服・同じ組み合わせに偏っていることを **履歴として可視化** する
* 「最近着ていない服」「使われていないテンプレート」に気づき、次の服選びの参考にする
* 個人利用を前提とし、**入力・操作がシンプルで継続しやすい** 服装管理を実現する

---

# データの概念

## ワードローブ

* ワードローブ ID をキーとするデータのまとまり
* URL 単位で分離され、他のワードローブのデータは参照できない
* 配下に「服」「テンプレート」「履歴」を保持する

## 服（Clothing）

* 1 着の服を表すデータ
* 構成要素

  * ラベル（必須、重複可）
  * 画像（任意、1 枚。ラベルだけでイメージが湧かない場合の補足情報）
* 論理削除を採用

  * 削除後は一覧には表示しない
  * 履歴やテンプレート詳細などの参照文脈では、画像・ラベルを保持したまま「削除済み」として表示する
* ラベルが重複する場合は、**画像サムネイルによって UI 上で区別**する

## テンプレート（Template）

* 複数の服を組み合わせた定型的な服装パターン
* 構成要素

  * テンプレートラベル
  * 複数の服への参照
* 論理削除を採用

  * 削除後は一覧には表示しない
  * 履歴で参照されている場合は「削除済み」として表示する

## 履歴（History）

* 「いつ、何を着たか」を記録するデータ
* 構成要素

  * 日付＋時刻
  * 入力種別

    * テンプレート入力
    * 服の組み合わせ入力
* 履歴は **物理削除**

  * 削除された履歴は完全に消去され、復元不可

---

# 削除ルールまとめ
一覧画面では削除されたアイテムは出さない。

以下の参照文脈では「削除済み」として表示する。 
* 服の詳細 
* テンプレート一覧のサムネ画像 
* テンプレートの詳細 
* 履歴

---
# 認証・アカウントを持たない
* 決定：ログイン機能は作らず、wardrobeId を含むURLにアクセスできる人が操作できる。
* 理由：個人利用・最小構成を優先。登録/ログインの摩擦を無くす。
* 今回やらないこと
  * URL流出時のアクセス制御（共有停止、再発行、権限）
  * 端末ごとの権限制御（閲覧のみ等）
* 影響/リスク
  * URLが漏れたら第三者に全操作される
  * 将来の復元/削除済み管理で“操作権限”が必要になる可能性
* 将来の拡張余地（メモ）
  * wardrobeSecret の導入（URLとは別に編集キーを持つ等）
  * アカウント導入時のマイグレーション方針
---

# 機能要件

## ワードローブ管理

* サイトトップからワードローブを新規作成できる
* 新規作成時にランダムなワードローブ ID を発行し、ホーム画面へ遷移する
* アカウント・ログイン機能は持たない
* クラウド同期により、同一 URL で複数端末から同じデータを参照できる

## 服の管理

* 服をラベルのみ、またはラベル＋画像で登録できる
* 服一覧画面では

  * ラベル
  * 小さな画像サムネイル
    を表示する
* 削除済みの服は一覧画面に表示しない
* 服の詳細画面では、削除済みの場合も画像・ラベルを保持したまま「削除済み」オーバーレイを表示する

## テンプレートの管理

* 複数の服を選択してテンプレートを作成できる
* テンプレート一覧画面では削除済みテンプレートを表示しない
* テンプレート詳細画面では、構成する服を確認できる
* テンプレート削除後も、履歴で参照される場合は「削除済み」として表示する
* テンプレートから服を削除する際の警告は行わない

## 今日着た記録（履歴登録）

* 1 日に複数回の登録を可能とする
* 登録方法は以下の 2 種類

  * テンプレートを選択して登録
  * テンプレートに含まれない服の組み合わせを選択して登録
* 記録には時刻を含める

## 履歴の表示・操作

* ホーム画面に直近 1 週間の履歴を常時表示する
* 下方向スクロールで、週単位に過去履歴を追加ロードする
* 表示ルール

  * テンプレート入力：テンプレートラベルで表示
  * 服の組み合わせ入力：服の組み合わせで表示
* 履歴は削除が可能(編集は将来要件)
* 削除は物理削除とする
* 並び順について
  * 履歴一覧の並び順は、ユーザーが指定した「服を着た日（date）」の順序のみを保証し、同一日に複数履歴がある場合の順序には意味を持たせない。
  * 同日内の複数登録は発生頻度が低い想定としつつ、表示の安定性確保のため内部的には一意に並ぶが、その順序は時刻順や入力順を示すものではない。

---

# 将来的な要件

## 削除済みデータの管理

* 削除済みの服一覧を確認できる
* 削除済みのテンプレート一覧を確認できる
* 削除済みデータを復元できる

## 並び替え機能

* 対象

  * 服一覧
  * テンプレート一覧
* 並び替え条件
  * 登録順
  * 着た回数順（服・テンプレート）
  * 最近着た順（服・テンプレート）

## ステータス拡張

* テンプレートに「チェック済み」ステータスを追加

  * 第三者による服装確認・承認の有無を表示する用途
* 服に「買う予定」ステータスを追加

  * 将来購入予定の服も含めて管理できるようにする

## サジェスト機能

* ホーム画面で「今日の服装テンプレート」をサジェスト表示
* ロジックは未定だが、以下を想定

  * 最近着た回数が少ないテンプレート
  * 一定期間使用されていないテンプレート

## テンプレートのタグ

* テンプレートにタグを付与できる（例：普段用／お出かけ用）
* タグによる絞り込みや表示切り替えを可能にする

## UI情報追加
服/テンプレートの一覧/詳細画面に
* 最後に着た日
* 着た回数
* 服が登録されているテンプレート
* 履歴の表
を表示する

## 履歴編集機能
履歴の編集を行う
* 日付
* 構成服/テンプレート

## 統計の強化
* 服/テンプレートを着た期間ごとの推移を示す

## 検索機能の追加

---
